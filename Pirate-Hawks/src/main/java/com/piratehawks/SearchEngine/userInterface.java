/*

        * To change this license header, choose License Headers in Project Properties.

        * To change this template file, choose Tools | Templates

        * and open the template in the editor.

        */



        package com.mycompany.piratehawks;



        import java.sql.Connection;

        import java.sql.PreparedStatement;

        import java.sql.ResultSet;

        import java.sql.SQLException;

        import java.util.logging.Level;

        import java.util.logging.Logger;

        import javax.swing.JOptionPane;

        import net.proteanit.sql.DbUtils;

        import java.util.regex.Matcher;

        import java.util.regex.Pattern;

        import javax.swing.table.DefaultTableModel;



/**

 *

 * @author Agnes B

 * 3/31/19 Added for AND/OR/ALL search terms,spaces, and (.,) only

 * 4/2/19 Fixed search condition

 */

        public class userInterface extends javax.swing.JFrame {

        String SearchTerm;  //AND/OR CONDITION

        String varText;     // variable

        String varTerm;

        Connection connection = null;



        /** Creates new form userInterface */

        public userInterface()

        {

        initComponents();

        }



        /** This method is called from within the constructor to

         * initialize the form.

         * WARNING: Do NOT modify this code. The content of this method is

         * always regenerated by the Form Editor.

         */

        @SuppressWarnings("unchecked")

        // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents

        private void initComponents() {



        jFrame1 = new javax.swing.JFrame();

        jFrame2 = new javax.swing.JFrame();

        jFrame3 = new javax.swing.JFrame();

        jFrame4 = new javax.swing.JFrame();

        label1 = new java.awt.Label();

        label2 = new java.awt.Label();

        buttonGroup1 = new javax.swing.ButtonGroup();

        buttonGroup2 = new javax.swing.ButtonGroup();

        buttonGroup3 = new javax.swing.ButtonGroup();

        jLabel1 = new javax.swing.JLabel();

        jLabel2 = new javax.swing.JLabel();

        searchText = new java.awt.TextField();

        searchButton = new java.awt.Button();

        andRadioButton = new javax.swing.JRadioButton();

        jRadioButton2 = new javax.swing.JRadioButton();

        jRadioButton3 = new javax.swing.JRadioButton();

        jScrollPane2 = new javax.swing.JScrollPane();

        Filename = new javax.swing.JTable();

        maintenanceButton = new java.awt.Button();

        aboutButton = new java.awt.Button();

        label3 = new java.awt.Label();

        counter1 = new java.awt.Label();



        javax.swing.GroupLayout jFrame1Layout = new javax.swing.GroupLayout(jFrame1.getContentPane());

        jFrame1.getContentPane().setLayout(jFrame1Layout);

        jFrame1Layout.setHorizontalGroup(

        jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)

        .addGap(0, 400, Short.MAX_VALUE)

        );

        jFrame1Layout.setVerticalGroup(

        jFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)

        .addGap(0, 300, Short.MAX_VALUE)

        );



        javax.swing.GroupLayout jFrame2Layout = new javax.swing.GroupLayout(jFrame2.getContentPane());

        jFrame2.getContentPane().setLayout(jFrame2Layout);

        jFrame2Layout.setHorizontalGroup(

        jFrame2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)

        .addGap(0, 400, Short.MAX_VALUE)

        );

        jFrame2Layout.setVerticalGroup(

        jFrame2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)

        .addGap(0, 300, Short.MAX_VALUE)

        );



        javax.swing.GroupLayout jFrame3Layout = new javax.swing.GroupLayout(jFrame3.getContentPane());

        jFrame3.getContentPane().setLayout(jFrame3Layout);

        jFrame3Layout.setHorizontalGroup(

        jFrame3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)

        .addGap(0, 400, Short.MAX_VALUE)

        );

        jFrame3Layout.setVerticalGroup(

        jFrame3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)

        .addGap(0, 300, Short.MAX_VALUE)

        );



        javax.swing.GroupLayout jFrame4Layout = new javax.swing.GroupLayout(jFrame4.getContentPane());

        jFrame4.getContentPane().setLayout(jFrame4Layout);

        jFrame4Layout.setHorizontalGroup(

        jFrame4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)

        .addGap(0, 400, Short.MAX_VALUE)

        );

        jFrame4Layout.setVerticalGroup(

        jFrame4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)

        .addGap(0, 300, Short.MAX_VALUE)

        );



        label1.setText("label1");



        label2.setText("label2");



        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        setTitle("Search Eninge");



        jLabel1.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N

        jLabel1.setText("Search Engine");



        jLabel2.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N

        jLabel2.setText("Search Terms:");



        searchButton.setLabel("Search");

        searchButton.setName(" "); // NOI18N

        searchButton.addActionListener(new java.awt.event.ActionListener() {

        public void actionPerformed(java.awt.event.ActionEvent evt) {

        searchButtonActionPerformed(evt);

        }

        });



        buttonGroup1.add(andRadioButton);

        andRadioButton.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N

        andRadioButton.setText("All of the Search Terms");

        andRadioButton.addActionListener(new java.awt.event.ActionListener() {

        public void actionPerformed(java.awt.event.ActionEvent evt) {

        andRadioButtonActionPerformed(evt);

        }

        });



        buttonGroup1.add(jRadioButton2);

        jRadioButton2.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N

        jRadioButton2.setSelected(false);

        jRadioButton2.setText("Any of the Search Terms");

        jRadioButton2.addActionListener(new java.awt.event.ActionListener() {

        public void actionPerformed(java.awt.event.ActionEvent evt) {

        jRadioButton2ActionPerformed(evt);

        }

        });



        buttonGroup1.add(jRadioButton3);

        jRadioButton3.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N

        jRadioButton3.setText("Exact Phrase");

        jRadioButton3.setName("ButtonGroup1"); // NOI18N

        jRadioButton3.addActionListener(new java.awt.event.ActionListener() {

        public void actionPerformed(java.awt.event.ActionEvent evt) {

        jRadioButton3ActionPerformed(evt);

        }

        });



        Filename.setModel(new javax.swing.table.DefaultTableModel(

        new Object [][] {

        {null},

        {null},

        {null},

        {null},

        {null},

        {null},

        {null},

        {null},

        {null},

        {null}

        },

        new String [] {

        "Matching Files"

        }

        ));

        jScrollPane2.setViewportView(Filename);



        maintenanceButton.setLabel("Maintenance");

        maintenanceButton.addMouseListener(new java.awt.event.MouseAdapter() {

        public void mouseClicked(java.awt.event.MouseEvent evt) {

        maintenanceButtonMouseClicked(evt);

        }

        });



        aboutButton.setLabel("About");

        aboutButton.addActionListener(new java.awt.event.ActionListener() {

        public void actionPerformed(java.awt.event.ActionEvent evt) {

        aboutButtonActionPerformed(evt);

        }

        });



        label3.setForeground(new java.awt.Color(102, 102, 102));

        label3.setText("Number of Indexed Files:");



        counter1.setText(" ");



        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());

        getContentPane().setLayout(layout);

        layout.setHorizontalGroup(

        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)

        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()

        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)

        .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 121, javax.swing.GroupLayout.PREFERRED_SIZE)

        .addGap(265, 265, 265))

        .addGroup(layout.createSequentialGroup()

        .addGap(22, 22, 22)

        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)

        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()

        .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 104, javax.swing.GroupLayout.PREFERRED_SIZE)

        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)

        .addComponent(searchText, javax.swing.GroupLayout.PREFERRED_SIZE, 406, javax.swing.GroupLayout.PREFERRED_SIZE)

        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)

        .addComponent(searchButton, javax.swing.GroupLayout.PREFERRED_SIZE, 96, javax.swing.GroupLayout.PREFERRED_SIZE)

        .addContainerGap(26, Short.MAX_VALUE))

        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()

        .addGap(0, 0, Short.MAX_VALUE)

        .addComponent(andRadioButton, javax.swing.GroupLayout.PREFERRED_SIZE, 165, javax.swing.GroupLayout.PREFERRED_SIZE)

        .addGap(46, 46, 46)

        .addComponent(jRadioButton2, javax.swing.GroupLayout.PREFERRED_SIZE, 178, javax.swing.GroupLayout.PREFERRED_SIZE)

        .addGap(28, 28, 28)

        .addComponent(jRadioButton3, javax.swing.GroupLayout.PREFERRED_SIZE, 138, javax.swing.GroupLayout.PREFERRED_SIZE)

        .addGap(78, 78, 78))

        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()

        .addComponent(jScrollPane2)

        .addContainerGap())))

        .addGroup(layout.createSequentialGroup()

        .addGap(42, 42, 42)

        .addComponent(maintenanceButton, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)

        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)

        .addComponent(aboutButton, javax.swing.GroupLayout.PREFERRED_SIZE, 73, javax.swing.GroupLayout.PREFERRED_SIZE)

        .addGap(65, 65, 65))

        .addGroup(layout.createSequentialGroup()

        .addGap(205, 205, 205)

        .addComponent(label3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)

        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)

        .addComponent(counter1, javax.swing.GroupLayout.PREFERRED_SIZE, 38, javax.swing.GroupLayout.PREFERRED_SIZE)

        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))

        );

        layout.setVerticalGroup(

        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)

        .addGroup(layout.createSequentialGroup()

        .addContainerGap()

        .addComponent(jLabel1)

        .addGap(27, 27, 27)

        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)

        .addComponent(jLabel2)

        .addComponent(searchText, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)

        .addComponent(searchButton, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))

        .addGap(18, 18, 18)

        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)

        .addComponent(andRadioButton)

        .addComponent(jRadioButton2)

        .addComponent(jRadioButton3))

        .addGap(34, 34, 34)

        .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 188, javax.swing.GroupLayout.PREFERRED_SIZE)

        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 47, Short.MAX_VALUE)

        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)

        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()

        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)

        .addComponent(maintenanceButton, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)

        .addComponent(aboutButton, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))

        .addGap(5, 5, 5)

        .addComponent(label3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))

        .addComponent(counter1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))

        );



        pack();

        }// </editor-fold>//GEN-END:initComponents



        private void maintenanceButtonMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_maintenanceButtonMouseClicked

        // TODO add your handling code here:

        // Click button to go to Maintenance Form

        Maintenance maint = new Maintenance();

        maint.setVisible(true);

        }//GEN-LAST:event_maintenanceButtonMouseClicked



        private void aboutButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_aboutButtonActionPerformed

        // TODO add your handling code here:

        JOptionPane.showMessageDialog(null,"Search Engine Version 1-Written by PirateHawks Team");

        }//GEN-LAST:event_aboutButtonActionPerformed



        @SuppressWarnings("empty-statement")

        private void andRadioButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_andRadioButtonActionPerformed



        varTerm="AND";



        }//GEN-LAST:event_andRadioButtonActionPerformed





        private void searchButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_searchButtonActionPerformed

        // Tested spaces , and . to search with Radio Button for AND/OR/ALL

        varText = searchText.getText();



        if ("".equals(searchText.getText())){

        JOptionPane.showMessageDialog(null,"Spaces, No Matching Files!");

        return;

        }

        if ("AND".equals(varTerm)){

        //varText = searchText.getText();

        String pattern;

        pattern = "(.*)(,*)";

        // Create a Pattern object

        Pattern r = Pattern.compile(pattern);

        // Now create matcher object.

        //Matcher m = r.matcher(varText);

        Matcher m = r.matcher(varText);



        if (m.find( )) {

        userQuery();



        }else {

        varText = "";

        JOptionPane.showMessageDialog(null,"No Matching Files!");

        }

        }else if ("OR".equals(varTerm)){

        JOptionPane.showMessageDialog(null,varText);

        String pattern;

        pattern = "\\d+\\s+[A-Z\\s]+\\s+[A-Z][A-Za-z]+";

        Pattern r = Pattern.compile(pattern);

        // Now create matcher object.

        //Matcher m = r.matcher(varText);

        Matcher m = r.matcher(varText);



        if (m.find( )) {

        userQuery();



        }else {

        varText = "";

        JOptionPane.showMessageDialog(null,"No Matching File!");

        }

        //JOptionPane.showMessageDialog(null,"ANY OF THE SEARCH TERMS:No Matching Files");

        varText = "";



        }else {

        // $input_pass=~/^123456$/

        //varText = searchText.getText();

        String pattern;

        //pattern = vartext.match^(+[a-z])$";

        pattern =  "+[a-z])$";

        // Create a Pattern object

        Pattern r = Pattern.compile(pattern);

        // Now create matcher object.

        //Matcher m = r.matcher(varText);

        Matcher m = r.matcher(varText);



        if (m.find( )) {

        userQuery();



        }else {

        varText = "";

        JOptionPane.showMessageDialog(null,"No Matching File! ");

        }

        JOptionPane.showMessageDialog(null,varText);

        JOptionPane.showMessageDialog(null,"EXACT PHRASE: No Matching Files ");

        varText = "";

        }



        }//GEN-LAST:event_searchButtonActionPerformed



        private void cleartable(){

        //Clears all rows in jTable

        Filename.setModel(new DefaultTableModel());

        searchText.setText("");

        }



        private void jRadioButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jRadioButton2ActionPerformed



        varTerm = "OR";

        cleartable();

        HashSet<String> set= new HashSet<String>();



        for (int filepostion=0;Filename.hasNext();filepostion++) {



        set.add(Filename.next().trim());



        }



        Filename.close();



        //if statement that tells user no files were match



        if(filename.equals(",") ||filename.equals(" "))



        {



        textField.setText("no files are matched");



        }//shows the file name absolute path



        else(set.add(filename.next().trim())) {



        textField.setText(filename.getAbsolutePath());



        }



        }//GEN-LAST:event_jRadioButton2ActionPerformed



        private void jRadioButton3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jRadioButton3ActionPerformed

        varTerm = "ALL";

        cleartable();



        }//GEN-LAST:event_jRadioButton3ActionPerformed



        /**

         * @param args the command line arguments

         */

        public static void main(String args[]) {

        /* Set the Nimbus look and feel */

        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">

        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.

         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html

         */

        try {

        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {

        if ("Nimbus".equals(info.getName())) {

        javax.swing.UIManager.setLookAndFeel(info.getClassName());

        break;

        }

        }

        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | javax.swing.UnsupportedLookAndFeelException ex) {

        java.util.logging.Logger.getLogger(userInterface.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);

        }



        //  Added here:*******************









        //</editor-fold>



        //</editor-fold>



        /* Create and display the form */

        java.awt.EventQueue.invokeLater(() -> {

        new userInterface().setVisible(true);



        });

        }



        // Variables declaration - do not modify//GEN-BEGIN:variables

        private javax.swing.JTable Filename;

        private java.awt.Button aboutButton;

        public javax.swing.JRadioButton andRadioButton;

        private javax.swing.ButtonGroup buttonGroup1;

        private javax.swing.ButtonGroup buttonGroup2;

        private javax.swing.ButtonGroup buttonGroup3;

        private java.awt.Label counter1;

        private javax.swing.JFrame jFrame1;

        private javax.swing.JFrame jFrame2;

        private javax.swing.JFrame jFrame3;

        private javax.swing.JFrame jFrame4;

        private javax.swing.JLabel jLabel1;

        private javax.swing.JLabel jLabel2;

        public javax.swing.JRadioButton jRadioButton2;

        public javax.swing.JRadioButton jRadioButton3;

        private javax.swing.JScrollPane jScrollPane2;

        private java.awt.Label label1;

        private java.awt.Label label2;

        private java.awt.Label label3;

        private java.awt.Button maintenanceButton;

        private java.awt.Button searchButton;

        private java.awt.TextField searchText;

        // End of variables declaration//GEN-END:variables



        private void userQuery() {

        //throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.

        try {

        connection=sqliteConnection2.dbConnector();

        String query;

        query = "select PathName, Status from SearchEngine ORDER BY PathName";

        PreparedStatement pst = null;



        try {

        pst = connection.prepareStatement(query);

        } catch (SQLException ex) {

        Logger.getLogger(Maintenance.class.getName()).log(Level.SEVERE, null, ex);

        }

        ResultSet rs = null;

        try {

        rs = pst.executeQuery();



        } catch (SQLException ex) {

        Logger.getLogger(Maintenance.class.getName()).log(Level.SEVERE, null, ex);

        }

        //form table name=FilenameTable

        Filename.setModel(DbUtils.resultSetToTableModel(rs));

        } catch (ClassNotFoundException ex) {

        Logger.getLogger(Maintenance.class.getName()).log(Level.SEVERE, null, ex);

        }



        }

        }